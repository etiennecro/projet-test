<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lexique pharmaceutique - Termes essentiels</title>
  <style>
    :root{
      --principal:#007A84;
      --secondaire:#32A6AC;
      --accent:#F8C137;
      --neutre-clair:#F6F8F4;
      --neutre-fonce:#1E2A2A;
      font-family: "Segoe UI", Inter, system-ui, sans-serif;
    }
    body{height:100%;margin:0;background-color:var(--neutre-fonce);color:var(--neutre-clair);}
    .wrap{max-width:1100px;margin:32px auto;padding:24px;}
    header{margin-bottom:32px; display:flex; flex-direction:column; gap:16px;}
    .badge{background:rgba(50,166,172,0.2);padding:8px 16px;border-radius:999px;color:var(--secondaire);font-weight:600;border:1px solid rgba(50,166,172,0.3);display:inline-block;}
    h1{margin:0;font-size:2rem;background:linear-gradient(135deg, var(--secondaire), var(--principal));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
    p.lead{margin:12px 0 0;color:var(--neutre-clair);font-size:1.05rem;line-height:1.6;}
    .controls{display:flex;gap:12px;margin:24px 0;flex-wrap:wrap}
    input[type="search"], select, button{
      padding:12px 16px;border-radius:10px;border:1px solid rgba(50,166,172,0.25);
      background:rgba(50,166,172,0.1);color:var(--neutre-clair);outline:none;font-size:1rem;
    }
    input[type="search"]{flex:1;min-width:280px;background:rgba(50,166,172,0.15);}
    input[type="search"]::placeholder{color:rgba(246,248,244,0.5);}
    select{background:rgba(50,166,172,0.15);color:var(--neutre-clair);cursor:pointer;}
    select option{background:var(--neutre-fonce);color:var(--neutre-clair);}
    button{cursor:pointer;background:var(--accent);color:var(--neutre-fonce);font-weight:700;border:none;transition:all 0.3s ease;}
    button:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(248,193,55,0.35);}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}

    .card{
      background:linear-gradient(180deg, rgba(50,166,172,0.15), rgba(50,166,172,0.08));
      border-radius:12px;
      padding:20px;
      border:1px solid rgba(50,166,172,0.25);
      transition:all 0.3s ease;
      display:flex;
      flex-direction:column;
    }
    .card:hover{border-color:rgba(248,193,55,0.4);box-shadow:0 4px 16px rgba(0,122,132,0.2);}

    .word{display:flex;align-items:center;gap:12px;font-weight:700;font-size:1.1rem;color:var(--secondaire);margin-bottom:12px;}
    .pos{font-size:0.8rem;color:var(--neutre-clair);margin-left:auto;background:rgba(248,193,55,0.15);padding:6px 10px;border-radius:6px;border:1px solid rgba(248,193,55,0.3);}
    .def{margin:10px 0;color:var(--neutre-clair);line-height:1.6;font-size:0.95rem;text-align:justify;}
    .def.truncated{max-height:4.8em;overflow:hidden;position:relative;}
    .def.truncated::after{content:'';position:absolute;bottom:0;left:0;right:0;height:1.5em;background:linear-gradient(to bottom, transparent, rgba(30,42,42,0.9));}
    .def-toggle{margin-top:8px;margin-bottom:12px;color:var(--accent);cursor:pointer;font-size:0.85rem;transition:all 0.2s ease;display:inline-block;}
    .def-toggle:hover{color:var(--secondaire);}
    .ex{margin:16px 0 12px 0;color:rgba(246,248,244,0.85);font-size:0.95rem;padding-left:12px;border-left:3px solid var(--accent);}

    .note strong { font-style: italic; font-weight: 700; }
    .note em { font-style: italic; }
    .autres-termes { font-size: 0.85rem; font-style: italic; }
    .source-box { font-size: 0.85rem; color: rgba(246,248,244,0.75); background: rgba(50,166,172,0.1); padding: 10px; border-radius: 6px; margin-top: auto; padding-top: 16px; line-height: 1.5; }
    .source-text { display: inline; }
    .source-text.truncated { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .source-toggle { margin-top: 8px; color: var(--accent); cursor: pointer; font-size: 0.85rem; transition: all 0.2s ease; display: inline-block; }
    .source-toggle:hover { color: var(--secondaire); }
    .note-icon { display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; background: rgba(248,193,55,0.2); border: 1px solid rgba(248,193,55,0.4); border-radius: 50%; cursor: pointer; margin-top: 16px; margin-bottom: 12px; font-size: 1rem; transition: all 0.3s ease; }
    .note-icon:hover { background: rgba(248,193,55,0.3); transform: scale(1.1); }
    .note-content { display: none; margin-top: 8px; margin-bottom: 12px; padding: 10px; background: rgba(50,166,172,0.08); border-radius: 6px; border-left: 3px solid var(--accent); color: rgba(246,248,244,0.85); font-size: 0.9rem; line-height: 1.6; }
    .note-content.visible { display: block; }

    .emoji{font-size:1.4rem;}
    footer{margin-top:40px;padding-top:24px;border-top:1px solid rgba(50,166,172,0.15);color:var(--neutre-clair);font-size:0.95rem;line-height:1.6;}
    footer p{margin:8px 0;}

    /* â€” ThÃ¨me clair amÃ©liorÃ© â€” */
    body.light {
      background-color: #f6f8f4;
      color: #1e2a2a;
    }
    body.light input[type="search"], body.light select {
      background: #ffffff;
      color: #1e2a2a;
      border:1px solid rgba(0,122,132,0.3);
    }
    body.light input::placeholder {
      color: rgba(30,42,42,0.5);
    }
    body.light .lead, body.light footer p { color: #1e2a2a; }
    body.light button { background: #f8c137; color: #1e2a2a; }
    body.light .card { 
      background: rgba(50,166,172,0.1); 
      border:1px solid rgba(0,122,132,0.2); 
      color: #1e2a2a; 
    }
    body.light .word { color: #007A84; }
    body.light .pos { color: #1e2a2a; background: rgba(248,193,55,0.2); border:1px solid rgba(248,193,55,0.3); }
    body.light .def, body.light .ex, body.light .note-content, body.light .source-box { color: #1e2a2a; }
    body.light .badge { color: #007A84; background: rgba(50,166,172,0.1); border:1px solid rgba(50,166,172,0.2); }
    body.light .def-toggle, body.light .source-toggle, body.light .note-icon { color: #d18f00; }
    body.light .note-content { background: rgba(248,193,55,0.05); }
    body.light .source-box { background: rgba(248,193,55,0.05); }

    @media (max-width:768px){
      h1{font-size:1.5rem;}
      .controls{flex-direction:column;}
      input[type="search"]{min-width:100%;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="display:flex; gap:12px; align-items:center;">
        <div class="badge">âš•ï¸ Lexique pharmaceutique</div>
        <button id="theme-toggle">ğŸŒ Changer de thÃ¨me</button>
      </div>
      <h1>ğŸ’Š Termes essentiels du domaine pharmaceutique</h1>
      <p class="lead">DÃ©finitions et contextes d'usage destinÃ©s aux professionnels de la santÃ© ğŸ§ªğŸ©º</p>
    </header>

    <div class="controls">
      <input id="search" type="search" placeholder="ğŸ” Rechercher un terme, une dÃ©finition ou un usage..." />
      <button id="reset">ğŸ”„ RÃ©initialiser</button>
    </div>

    <main>
      <section id="lexicon" class="grid"></section>
    </main>

    <footer>
      <p>ğŸ’¡ Ce lexique a Ã©tÃ© conÃ§u pour illustrer les termes techniques et conceptuels utilisÃ©s dans le champ pharmaceutique et biomÃ©dical.</p>
      <p>ğŸ“˜ Auteur : Ã‰quipe pÃ©dagogique pharmaceutique â€” Â© 2025</p>
    </footer>
  </div>

  <script src="termes.js"></script>
  <script>
    const container = document.getElementById('lexicon');
    const emojis = ['ğŸ’Š','ğŸ§ª','ğŸ§¬','ğŸ©¸','ğŸ”¬','âš—ï¸','ğŸ¥','ğŸ©º','ğŸ’‰','ğŸ§«','ğŸ§´','ğŸ©»','ğŸ«€','ğŸ«','ğŸ©¹','ğŸš‘','ğŸ‘©â€âš•ï¸','ğŸ‘¨â€âš•ï¸','ğŸ§ ','âœï¸','ğŸ…°ï¸','ğŸ“'];

    function render(list){
      container.innerHTML = '';
      if(list.length === 0){
        container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: rgba(246,248,244,0.6); padding: 40px;">Aucun rÃ©sultat trouvÃ©</p>';
        return;
      }
      list.forEach(([mot,def,source,autres,notes], index)=>{
        const card = document.createElement('article');
        card.className = 'card';
        const hasNotes = notes && notes.trim().length > 0;
        const hasSource = source && source.trim().length > 0;
        const isLongDef = def.length > 215;
        const defId = 'def-' + Math.random().toString(36).substr(2, 9);
        const sourceId = 'source-' + Math.random().toString(36).substr(2, 9);
        const isLongSource = source && source.length > 100;
        const emoji = emojis[index % emojis.length];

        card.innerHTML = `
          <div class="word"><span class="emoji">${emoji}</span><span>${mot}</span></div>
          <div class="def ${isLongDef ? 'truncated' : ''}" id="${defId}">${def}</div>
          ${isLongDef ? `<div class="def-toggle" onclick="
            const el = document.getElementById('${defId}');
            const btn = this;
            if(el.classList.contains('truncated')) {
              el.classList.remove('truncated');
              btn.textContent = 'â–² RÃ©duire';
            } else {
              el.classList.add('truncated');
              btn.textContent = 'â–¼ Lire la suite';
            }
          ">â–¼ Lire la suite</div>` : ''}

          ${autres ? `<div class="ex autres-termes">Autres termes : ${autres}</div>` : ''}

          ${hasNotes ? `
            <div class="note-icon" onclick="this.nextElementSibling.classList.toggle('visible')" title="Note supplÃ©mentaire">
              ğŸ’¡
            </div>
            <div class="note-content">${notes}</div>
          ` : ''}

          ${hasSource ? `
          <div class="source-box">
            ğŸ“š <strong>Source:</strong> <em><span class="source-text ${isLongSource ? 'truncated' : ''}" id="${sourceId}">${source}</span></em>
            ${isLongSource ? `<div class="source-toggle" onclick="
              const el = document.getElementById('${sourceId}');
              const btn = this;
              if(el.classList.contains('truncated')) {
                el.classList.remove('truncated');
                btn.textContent = 'â–² RÃ©duire';
              } else {
                el.classList.add('truncated');
                btn.textContent = 'â–¼ Lire la suite';
              }
            ">â–¼ Lire la suite</div>` : ''}
          </div>
          ` : ''}
        `;
        container.appendChild(card);
      });
    }
    render(LEX);

    const search=document.getElementById('search');
    const reset=document.getElementById('reset');
    function applyFilters(){
      const q=search.value.toLowerCase();
      render(LEX.filter(([mot,def,source,autres,notes])=>{
        return (mot+def+source+autres+notes).toLowerCase().includes(q);
      }));
    }
    search.addEventListener('input',applyFilters);
    reset.addEventListener('click',()=>{search.value='';render(LEX);});

    // â€” ThÃ¨me toggle â€”
    const themeBtn = document.getElementById('theme-toggle');
    themeBtn.addEventListener('click', ()=>{
      document.body.classList.toggle('light');
      themeBtn.textContent = document.body.classList.contains('light') ? 'ğŸŒ™ ThÃ¨me sombre' : 'ğŸŒ Changer de thÃ¨me';
    });
  </script>
</body>
</html>
